# Eldonia-Nex 統合要件定義書

## クリエイタープラットフォーム総合ドキュメント

---

## 🎯 プロジェクト概要

### プロジェクト基本情報

**プロジェクト名**: Eldonia-Nex
**副題**: クリエイターのための創作プラットフォーム
**バージョン**: 1.0
**作成日**: 2025年11月9日

### ビジョン・ミッション

**ビジョン**: すべてのクリエイターが自由に表現し、正当な評価と収益を得られる世界の実現
**ミッション**: 創作活動を通じた経済的自立と創造性の向上を支援する包括的プラットフォームの提供

### ターゲットユーザー

1. **個人クリエイター**: イラストレーター、写真家、音楽家、映像制作者
2. **企業・団体**: 制作会社、広告代理店、教育機関
3. **コンシューマー**: アート愛好家、一般購入者、ファン

---

## 🏗️ システム構成

### 技術スタック

#### フロントエンド

- **React 18.3+** / **Next.js 15.0+** / **TypeScript 5.7+**

- **TailwindCSS** / **Radix UI** / **Framer Motion**

- **PWA対応** / **レスポンシブデザイン**

#### バックエンド

- **Python 3.12+** / **Django 5.1+** / **Django REST Framework 3.15+**

- **PostgreSQL 17+** / **Redis 7.4+** / **Celery 5.4+**

- **Django Channels 4.1+** (WebSocket)

#### インフラストラクチャ

- **AWS/Azure/GCP** (マルチクラウド)

- **Docker 27.3+** / **Kubernetes 1.31+**

- **Nginx** / **Gunicorn** / **CloudFlare CDN**

#### 監視・分析

- **Datadog** / **Sentry** / **Google Analytics**

- **Stripe** (決済) / **SendGrid** (メール)

### アーキテクチャ設計

```text
┌─────────────────────┐  ┌─────────────────────┐
│   Next.js Frontend  │  │   Mobile App (PWA)  │
└─────────────────────┘  └─────────────────────┘
           │                        │
           └──────────┬───────────────┘
                      │
         ┌─────────────▼─────────────┐
         │      Load Balancer        │
         │       (CloudFlare)        │
         └─────────────┬─────────────┘
                       │
    ┌─────────────────┬▼┬─────────────────┐
    │   Django API    │ │   WebSocket     │
    │    (REST)       │ │   (Channels)    │
    └─────────────────┴─┴─────────────────┘
                       │
         ┌─────────────▼─────────────┐
         │     PostgreSQL 17+        │
         │     (Primary DB)          │
         └───────────────────────────┘
                       │
         ┌─────────────▼─────────────┐
         │      Redis 7.4+           │
         │   (Cache & Sessions)      │
         └───────────────────────────┘

```text

---

## 🎨 UI/UXデザインガイドライン

### ブランドアイデンティティ

#### ロゴ・ブランディング

- **ロゴデザイン**: ファンタジー魔法陣 + ENモノグラム

- **ブランドカラー**: ゴールドグラデーション (#FFD700 → #FFA500)

- **メインフォント**: PT Serif (ブランド) / Noto Sans JP (UI)

#### カラーパレット

```css
/* プライマリカラー */
Primary: #6366F1 (Indigo-500)
Primary Dark: #4F46E5 (Indigo-600)

/* ブランドグラデーション */
Brand Gradient: linear-gradient(180deg, #FCD34D 0%, #F97316 100%)

/* セカンダリカラー */
Success: #10B981 (Green-500)
Warning: #F59E0B (Yellow-500)
Error: #EF4444 (Red-500)

/* ダークモード（デフォルト） */
Background: #111827 / #1F2937
Text Primary: #F9FAFB
Text Secondary: #D1D5DB
Border: #4B5563

```text

### レイアウト設計

#### ヘッダーコンポーネント（3カラム）

```text
┌─────────────────────────────────────────────────────────────┐
│ 【左：ブランド30%】      【中央：ナビ40%】      【右：ユーザー30%】│
│ ⭐ Eldonia-Nex          GALLERY|COMMUNITY      🛒 通知 👤Lv.25│
│ クリエイタープラットフォーム  検索ボックス        EXP ■■■■■■□□□□│
└─────────────────────────────────────────────────────────────┘

```text

#### レスポンシブブレークポイント

- **Mobile**: 320px - 767px

- **Tablet**: 768px - 1023px

- **Desktop**: 1024px - 1439px

- **Large**: 1440px以上

---

## 💼 機能要件

### 1. ユーザー管理・認証システム

#### 1.1 ユーザー登録・認証

```python

## サブスクリプションプラン

FREE = {
    'price': 0,
    'artworks_per_month': 3,
    'file_size_limit': '10MB',
    'storage': '100MB',
    'commission_rate': 0.15,
    'live_streaming': False
}

STANDARD = {
    'price': 800,  # JPY
    'artworks_per_month': 20,
    'file_size_limit': '50MB',
    'storage': '1GB',
    'commission_rate': 0.12,
    'live_streaming': True,
    'max_viewers': 50
}

PRO = {
    'price': 1500,  # JPY
    'artworks_per_month': -1,  # 無制限
    'file_size_limit': '500MB',
    'storage': '10GB',
    'commission_rate': 0.08,
    'live_streaming': True,
    'max_viewers': 200
}

BUSINESS = {
    'price': 10000,  # JPY
    'artworks_per_month': -1,
    'file_size_limit': '2GB',
    'storage': '100GB',
    'commission_rate': 0.05,
    'live_streaming': True,
    'max_viewers': 1000,
    'team_accounts': 10,
    'api_access': True
}

```text

#### 1.2 プロフィール管理

- **基本情報**: 表示名、プロフィール画像、自己紹介、連絡先

- **スキル情報**: 専門分野、使用ツール、経験年数、実績

- **ソーシャル**: SNSリンク、ポートフォリオサイト、外部リンク

- **設定**: 通知設定、プライバシー設定、言語・通貨設定

### 2. ギャラリー・作品管理機能

#### 2.1 作品投稿システム

```yaml
サポートファイル形式:
  画像: JPEG, PNG, GIF, WebP (最大20MB)
  動画: MP4, MOV, AVI (最大500MB)
  音声: MP3, WAV, FLAC (最大100MB)
  ドキュメント: PDF (最大50MB)

メタデータ項目:
  - タイトル (必須, 100文字以内)
  - 説明 (任意, 2000文字以内)
  - カテゴリ (必須選択)
  - タグ (最大10個)
  - 価格設定 (無料/有料)
  - ライセンス種別
  - 成人向けフラグ

```text

#### 2.2 検索・フィルタリング機能

- **キーワード検索**: タイトル、説明、タグでの検索

- **カテゴリフィルタ**: イラスト、写真、3D、音楽、動画、その他

- **価格フィルタ**: 無料、有料、価格帯指定

- **ソート機能**: 人気順、新着順、価格順、評価順

- **高度な検索**: 投稿日期間、ファイル形式、ライセンス種別

#### 2.3 ソーシャル機能

- **いいね機能**: ワンクリック評価（EXP 10ポイント付与）

- **お気に入り**: プライベートコレクション、フォルダ分類

- **コメント機能**: レビュー投稿、返信機能、評価システム

- **ファン機能**: クリエイター間のつながり、新作通知

### 3. コミュニティ・コラボレーション機能

#### 3.1 グループ作業環境

- **プロジェクト管理**: タスク管理、スケジュール管理、マイルストーン設定

- **ファイル共有**: バージョン管理、権限制御、同期機能

- **コミュニケーション**: チャット、ビデオ会議、フォーラム

#### 3.2 協力申請システム

```python
class CollaborationRequest:
    requester_id: int
    target_user_id: int
    artwork_id: int
    message: str  # 申請理由 (500文字以内)
    proposal_details: dict  # 提案内容詳細
    budget: Decimal  # 予算
    timeline: str  # 希望期間
    status: str  # pending, accepted, rejected, cancelled

```text

### 4. イベント管理機能

#### 4.1 イベント作成・管理

- **基本情報**: タイトル、説明、日時、会場情報、定員設定

- **チケット管理**: 種別設定、価格設定、販売期間、数量制限

- **告知・宣伝**: サイト内バナー、SNS連携、メール通知

#### 4.2 チケット販売システム

```yaml
決済方法:
  - クレジットカード (Stripe)
  - 電子マネー
  - 銀行振込
  - 多通貨対応 (JPY/USD/EUR/KRW/CNY/VND)

チケット機能:
  - QRコード発行
  - 電子チケット配信
  - 入場管理システム
  - 譲渡・転売制限

```text

### 5. ECサイト・商品販売機能

#### 5.1 商品管理

- **デジタル商品**: 作品ファイル、ライセンス販売

- **物理商品**: グッズ、印刷物、限定品

- **在庫管理**: 在庫数、予約販売、入荷通知

- **バリエーション**: サイズ、色、形式の管理

#### 5.2 決済・配送システム

- **注文管理**: 受付、確認、処理、発送管理

- **配送管理**: 配送方法、送料計算、追跡機能

- **顧客対応**: 注文履歴、キャンセル・返品、問い合わせ

### 6. Live配信・ストリーミング機能

#### 6.1 配信システム

```yaml
配信仕様:
  - 配信品質: 720p / 1080p
  - 最大同時視聴者数:

    Standard: 50人
    Pro: 200人
    Business: 1000人
  - 配信時間: 無制限 (Proプラン以上)
  - アーカイブ保存: 自動保存機能

インタラクション:
  - リアルタイムチャット
  - スタンプ・絵文字
  - 投げ銭機能 (手数料10%)
  - 視聴者カウント

```text

#### 6.2 収益化機能

- **有料配信**: サブスクリプション配信、ペイパービュー

- **投げ銭システム**: リアルタイム投げ銭、ギフト機能

- **広告収益**: 配信内広告、収益分配システム

### 7. 仕事・マッチング機能

#### 7.1 クリエーター検索システム

- **プロフィール**: スキル、実績、レビュー、ポートフォリオ

- **検索機能**: スキル、経験年数、地域、予算、評価での検索

- **マッチングAI**: 相性スコア算出、推薦システム

#### 7.2 案件・求人管理

- **案件投稿**: 詳細情報、必要スキル、予算、期間設定

- **応募管理**: 応募受付、選考、メッセージ交換

- **契約支援**: 契約書テンプレート、エスクロー機能

### 8. ゲーミフィケーション機能

#### 8.1 EXP・レベルシステム

```python
EXP_ACTIONS = {
    'artwork_post': 100,      # 作品投稿
    'artwork_purchase': 50,    # 作品購入
    'like_received': 10,      # いいね獲得
    'comment_post': 5,        # コメント投稿
    'sale_completed': 500,    # 販売成約
    'stream_minute': 10,      # Live配信（分）
    'event_created': 1000,    # イベント開催
    'daily_login': 10,        # デイリーログイン
}

## レベル計算式

## Level n: 前レベル×1.5の累積EXP

## Level 1: 0-100 EXP

## Level 2: 101-300 EXP

## Level 3: 301-750 EXP

```text

#### 8.2 実績・バッジシステム

- **実績カテゴリ**: 投稿実績、売上実績、人気実績、活動実績、協力実績

- **バッジ階層**: Bronze/Silver/Gold/Platinum

- **限定バッジ**: 期間限定、イベント限定、特別功績

#### 8.3 ランキングシステム

- **総合レベルランキング**

- **月間EXP獲得ランキング**

- **売上ランキング**（月/年）

- **人気作品ランキング**

- **新人ランキング**

### 9. 紹介・アフィリエイト機能

#### 9.1 紹介コードシステム

```yaml
紹介コード生成:
  - 8文字英数字の専用コード
  - カスタマイズ可能
  - QRコード自動生成
  - 有効期限設定

成果計測:
  - クリック数・コンバージョン率
  - QRコード読み取り統計
  - 売上貢献度計算
  - 地域・デバイス別分析
  - 紹介料: 有料会員の10%

```text

#### 9.2 QRコード機能

- **リアルタイム生成**: PNG/SVG形式

- **カスタマイズ**: 色・サイズ・デザイン調整

- **印刷対応**: 高解像度出力

- **読み取り最適化**: スマートフォン対応

### 10. 多言語・多通貨対応

#### 10.1 言語対応

```yaml
対応言語:
  フェーズ1: 日本語、英語
  フェーズ2: 韓国語、中国語（簡体・繁体）、ベトナム語
  将来拡張: スペイン語、フランス語、ドイツ語

実装方式:
  - Django i18n
  - Next.js International Routing
  - 動的言語切替
  - コンテンツ翻訳管理

```text

#### 10.2 通貨対応

```yaml
対応通貨:
  - JPY (日本円) - デフォルト
  - USD (米ドル)
  - EUR (ユーロ)
  - KRW (韓国ウォン)
  - CNY (中国元)
  - VND (ベトナムドン)

機能:
  - 自動為替変換
  - リアルタイム為替レート
  - 地域別価格表示
  - 決済通貨選択

```text

---

## 🗄️ データベース設計

### ERD概要

```mermaid
erDiagram
    USERS ||--o{ ARTWORKS : creates
    USERS ||--o{ EVENTS : organizes
    USERS ||--o{ LIVE_STREAMS : streams
    USERS ||--o{ ORDERS : places
    USERS ||--o{ COMMENTS : posts
    USERS ||--o{ LIKES : gives
    USERS ||--o{ FANS : follows

    ARTWORKS ||--o{ ORDER_ITEMS : contains
    ARTWORKS ||--o{ COMMENTS : receives
    ARTWORKS ||--o{ LIKES : receives
    ARTWORKS ||--o{ TAGS : tagged_with

    GROUPS ||--o{ GROUP_MEMBERS : has
    GROUPS ||--o{ PROJECTS : manages

    USERS ||--o{ USER_EXP_LOG : earns
    USERS ||--o{ USER_ACHIEVEMENTS : unlocks

```text

### 主要テーブル設計

#### users（ユーザー）

```sql
CREATE TABLE users (
    id BIGSERIAL PRIMARY KEY,
    username VARCHAR(50) UNIQUE NOT NULL,
    email VARCHAR(255) UNIQUE NOT NULL,
    password_hash VARCHAR(255) NOT NULL,
    display_name VARCHAR(100),
    bio TEXT,
    avatar_url VARCHAR(500),
    subscription_type VARCHAR(20) DEFAULT 'free'
        CHECK (subscription_type IN ('free', 'standard', 'pro', 'business')),
    total_exp BIGINT DEFAULT 0,
    current_level INTEGER DEFAULT 1,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP
);

```text

#### artworks（作品）

```sql
CREATE TABLE artworks (
    id BIGSERIAL PRIMARY KEY,
    creator_id BIGINT NOT NULL REFERENCES users(id) ON DELETE CASCADE,
    title VARCHAR(255) NOT NULL,
    description TEXT,
    category_id INTEGER NOT NULL REFERENCES categories(id),
    file_url VARCHAR(500) NOT NULL,
    price DECIMAL(10,2) DEFAULT 0,
    is_free BOOLEAN DEFAULT TRUE,
    view_count INTEGER DEFAULT 0,
    like_count INTEGER DEFAULT 0,
    download_count INTEGER DEFAULT 0,
    status VARCHAR(20) DEFAULT 'published',
    created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP
);

```text

#### subscription_plans（サブスクリプション）

```sql
CREATE TABLE subscription_plans (
    id SERIAL PRIMARY KEY,
    plan_id VARCHAR(20) UNIQUE NOT NULL,
    name VARCHAR(100) NOT NULL,
    price DECIMAL(10,2) NOT NULL,
    billing_cycle VARCHAR(20) DEFAULT 'monthly',
    features JSONB,
    trial_days INTEGER DEFAULT 0,
    is_active BOOLEAN DEFAULT TRUE
);

```text

---

## 🔗 API設計

### 基本仕様

- **プロトコル**: HTTPS

- **ベースURL**: `<https://api.eldonia-nex.com/v1`>

- **認証**: JWT Bearer Token + OAuth 2.0

- **データ形式**: JSON

- **フレームワーク**: Django REST Framework 3.15+

### 主要APIエンドポイント

#### 認証API

```http
POST /auth/register
POST /auth/login
POST /auth/refresh
POST /auth/logout
POST /auth/oauth/{provider}

```text

#### ユーザー管理API

```http
GET    /users/{user_id}
PUT    /users/me/profile
POST   /users/{user_id}/fan
DELETE /users/{user_id}/fan
GET    /users/{user_id}/fans

```text

#### 作品管理API

```http
GET    /artworks?category={id}&sort={type}&page={num}
POST   /artworks
GET    /artworks/{artwork_id}
PUT    /artworks/{artwork_id}
DELETE /artworks/{artwork_id}
POST   /artworks/{artwork_id}/like
POST   /artworks/{artwork_id}/comments

```text

#### サブスクリプションAPI

```http
GET  /subscription/plans
GET  /users/me/subscription
POST /subscription/upgrade
POST /subscription/downgrade
GET  /users/me/usage
GET  /users/me/limits/check

```text

#### 紹介・QRコードAPI

```http
POST /referral/code/generate
GET  /referral/qr/{code}?size=300&color=000000
GET  /referral/stats
POST /referral/track/conversion

```text

### レート制限

- **認証済みユーザー**: 1000リクエスト/時間

- **未認証ユーザー**: 100リクエスト/時間

- **ファイルアップロード**: 10回/時間

- **検索API**: 500リクエスト/時間

---

## 🛡️ 非機能要件

### セキュリティ要件

#### 認証・認可

- **パスワード**: 最小8文字、英数字記号必須

- **多要素認証**: SMS/Email/認証アプリ対応

- **セッション管理**: 24時間自動ログアウト

- **権限管理**: ロールベース制御（一般/プレミアム/管理者）

#### データ保護

- **通信暗号化**: TLS 1.3以上

- **データ暗号化**: AES-256

- **個人情報保護**: GDPR準拠、削除権対応

#### セキュリティ監視

- **脅威検知**: WAF、不正ログイン検知

- **脆弱性管理**: 月次スキャン、年2回ペネトレーションテスト

### パフォーマンス要件

#### レスポンス性能

- **ホームページ**: 2秒以内

- **作品詳細**: 1.5秒以内

- **API レスポンス**: 500ms以内（認証API）

- **ファイルアップロード**: 30秒以内（10MB）

#### 同時接続性能

- **通常時**: 5,000ユーザー同時接続

- **ピーク時**: 15,000ユーザー同時接続

- **Live配信**: 1配信1,000同時視聴

- **イベント時**: 20,000ユーザー同時接続

### 可用性要件

- **サービス稼働率**: 99.9%以上

- **Live配信**: 99.95%以上

- **決済システム**: 99.99%以上

- **障害復旧時間**: Critical障害1時間以内

### スケーラビリティ要件

- **水平拡張**: ロードバランサー、オートスケーリング

- **垂直拡張**: CPU/メモリ動的増強

- **データベース**: 読み取りレプリカ、パーティショニング

- **CDN**: 静的コンテンツ高速配信

---

## 📊 管理機能

### 管理画面要件

#### ユーザー管理

- **ユーザー一覧**: 検索、フィルタリング、詳細確認

- **アカウント制御**: 停止、警告、権限変更

- **統計情報**: 活動状況、売上実績、ファン数

#### コンテンツ管理

- **作品審査**: AI自動チェック + 人的審査

- **通報処理**: 不適切コンテンツの報告・対応

- **コメント管理**: 荒らし対策、削除・編集

#### 売上・決済管理

```yaml
管理機能:
  - 日次・月次・年次売上レポート
  - 手数料収入詳細
  - 決済エラー監視
  - 返金・キャンセル処理
  - 税務処理対応

手数料設定:
  - カテゴリ別手数料率
  - プラン別優遇設定
  - 期間限定キャンペーン

```text

#### システム監視

- **リアルタイム監視**: CPU、メモリ、ディスク、ネットワーク

- **アクセス解析**: ページビュー、ユーザー行動、コンバージョン

- **エラー監視**: アプリケーションエラー、障害通知

---

## 🚀 開発・運用計画

### 開発フェーズ

#### Phase 1: 基盤構築（3ヶ月）

- ユーザー認証・管理機能

- 基本的な作品投稿・閲覧機能

- 決済システム基盤

- 管理画面基本機能

#### Phase 2: コア機能（4ヶ月）

- ソーシャル機能（いいね、ファン、コメント）

- ゲーミフィケーション機能

- Live配信機能

- イベント管理機能

#### Phase 3: 高度機能（3ヶ月）

- 多言語・多通貨対応

- AI推薦システム

- 高度な分析機能

- モバイルアプリ（PWA）

#### Phase 4: 拡張機能（継続）

- API公開・サードパーティ連携

- 企業向け機能拡充

- 新地域展開

- 機械学習活用機能

### 運用・保守

#### 監視体制

- **24時間監視**: システム状況、セキュリティ

- **定期メンテナンス**: 月1回、深夜時間帯

- **緊急対応**: Critical障害1時間以内復旧

#### バックアップ・災害対策

- **データベース**: 日次フル + 1時間間隔増分

- **ファイルデータ**: 日次バックアップ

- **DR目標**: RTO 4時間以内、RPO 1時間以内

---

## 💰 収益モデル

### 収益源

#### 1. サブスクリプション収益

```yaml
月額料金:
  Free: ¥0 (ユーザー獲得)
  Standard: ¥800 (お小遣い稼ぎ層)
  Pro: ¥1,500 (専業クリエイター)
  Business: ¥10,000 (企業・団体)

年間売上予測:
  - 想定ユーザー数: 100,000人
  - 有料転換率: 15%
  - 平均月額: ¥1,200
  - 年間収益: ¥216,000,000

```text

#### 2. 手数料収益

```yaml
販売手数料:
  Free: 15%
  Standard: 12%
  Pro: 8%
  Business: 5%

Live配信:
  投げ銭手数料: 10%

紹介アフィリエイト:
  有料会員紹介: 10%

```text

#### 3. その他収益

- **広告収益**: プレミアム配信、バナー広告

- **企業向けサービス**: カスタマイズ、コンサルティング

- **イベント収益**: 公式イベント、手数料収入

### コスト構造

- **開発・人件費**: 60%

- **インフラ・運用**: 25%

- **マーケティング**: 10%

- **その他**: 5%

---

## 📈 KPI・成功指標

### ユーザー指標

- **月間アクティブユーザー（MAU）**: 100,000人

- **有料転換率**: 15%

- **ユーザー継続率**: 80%（3ヶ月）

- **新規登録数**: 5,000人/月

### ビジネス指標

- **月間流通総額（GMV）**: ¥50,000,000

- **ARPU**: ¥1,200/月

- **LTV/CAC比**: 3:1以上

- **収益成長率**: 月間10%

### プラットフォーム指標

- **作品投稿数**: 10,000件/月

- **取引成約率**: 5%

- **検索→購入コンバージョン**: 3%

- **Live配信視聴時間**: 100,000時間/月

---

## 🎯 今後の展開

### 短期目標（1年以内）

- **ユーザー基盤確立**: 50,000登録ユーザー

- **収益化達成**: 月間収益¥10,000,000

- **機能完成度**: コア機能100%実装

- **海外展開**: 英語版リリース

### 中期目標（3年以内）

- **市場シェア**: 国内クリエイタープラットフォームTop3

- **グローバル展開**: アジア主要国進出

- **AI機能**: 推薦・自動化機能実装

- **企業連携**: 主要企業との提携拡大

### 長期目標（5年以内）

- **IPO準備**: 株式公開準備

- **技術革新**: VR/AR対応、ブロックチェーン活用

- **社会貢献**: クリエイター支援基金設立

- **エコシステム**: 包括的創作支援環境の構築

---

*このドキュメントは、Eldonia-Nexプラットフォーム開発の包括的な要件定義書です。技術仕様、UI/UX設計、機能要件、非機能要件、ビジネス要件を統合的に定義し、開発チーム全体で共有する基準文書として機能します。*

**作成日**: 2025年11月9日
**バージョン**: 1.0
**管理責任者**: 開発チーム
**承認者**: プロジェクトマネージャー

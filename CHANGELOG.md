# Eldonia-Nex Version History

## Version 0.2.0 (2025-11-30)

### 🎉 新機能

#### **作品アップロード機能**
- 全メディア対応のアップロード機能実装
  - 🖼️ 画像: JPG, PNG, GIF, WebP, BMP, SVG (最大10MB)
  - 🎬 動画: MP4, MOV, AVI, MKV, WebM, FLV (最大500MB)
  - 🎵 音楽: MP3, WAV, OGG, FLAC, AAC, M4A (最大50MB)
  - 🧊 3Dモデル: OBJ, FBX, GLTF, GLB, BLEND, STL (最大100MB)
  - 📄 ドキュメント: PDF, TXT, DOC, DOCX (最大20MB)
  - 📦 アーカイブ: ZIP, RAR, 7Z (最大200MB)

#### **紹介コード機能**
- ユーザーベースの紹介コード生成
- QRコード生成・ダウンロード機能
- 紹介統計表示（総紹介数、アクティブ、報酬）
- 紹介特典システム

#### **プロフィール設定機能**
- 表示名、メールアドレス、自己紹介編集
- アバター画像アップロード（ドラッグ&ドロップ対応）
- タイムゾーン設定（6地域対応）
- リアルタイム文字数カウント

#### **ダッシュボード強化**
- 統計カード表示（作品数、フォロワー、いいね、閲覧数、収益）
- クイックアクション（作品投稿、ギャラリー、紹介コード）
- タブナビゲーション（概要、プロフィール、設定、紹介コード、アクティビティ）

### 🛡️ セキュリティ

#### **ファイルアップロードセキュリティ**
- ディレクトリトラバーサル攻撃対策
- 二重拡張子攻撃対策
- NULLバイト攻撃対策
- SVG XSS攻撃対策
- MIMEタイプ検証（libmagic使用）
- ファイル内容検証（マジックナンバーチェック）
- ファイルサイズ検証（最小・最大）
- ファイルハッシュ計算（SHA-256）
- ファイル名サニタイズ
- メタデータ記録（監査ログ）

#### **Django セキュリティ設定**
- HTTPS リダイレクト（本番環境）
- HSTS 設定
- CSRF トークン検証
- XSS 対策
- Secure Cookie 設定
- SameSite Cookie 設定

### 🎨 UI/UX改善

#### **ダッシュボード**
- プロフェッショナルなグラデーションデザイン
- レスポンシブ対応（モバイル、タブレット、デスクトップ）
- ホバーエフェクト・アニメーション
- カラフルな統計カード

#### **作品アップロードページ**
- 直感的なフォームデザイン
- 対応ファイル形式の明確な表示
- リアルタイムバリデーション
- エラーハンドリング

#### **紹介コードページ**
- QRコード自動生成（白地に黒）
- ワンクリックコピー機能
- 紹介統計の視覚化
- 使い方ガイド

### 🔧 技術改善

#### **バックエンド API**
- 作品アップロードAPI (`POST /api/v1/artworks/upload-image/`)
- 作品作成API (`POST /api/v1/artworks/create/`)
- 作品一覧API (`GET /api/v1/artworks/list/`)
- 紹介コードAPI (`GET /api/v1/users/{user_id}/referral-code/`)
- 紹介リストAPI (`GET /api/v1/users/{user_id}/referrals/`)
- アバターアップロードAPI (`POST /api/v1/users/upload-avatar/`)

#### **フロントエンド**
- QRコード生成ライブラリ統合 (qrcode)
- 画像アップロードコンポーネント (ImageUpload)
- ダミー認証システム（開発用）
- AuthContext強化

#### **データベース**
- PostgreSQL 17 対応
- マイグレーション実行

### 📚 ドキュメント

- ユーザープロフィール設定機能仕様書 (`docs/user-profile-settings-spec.md`)
- ファイルアップロード機能仕様書 (`docs/file-upload-spec.md`)
- 紹介コード機能仕様書 (`docs/referral-code-spec.md`)
- セキュリティ対策仕様書 (`docs/security-upload-spec.md`)

### 🐛 バグ修正

- インポートエラー修正（Referralモデルの場所）
- フィールド名修正（referred → referred_user）
- プロトコル判定修正（HTTPS判定）
- HSTS キャッシュ問題の解決（ポート変更 8000 → 8001）
- フロントエンドビルドエラー修正
- ダミー認証システム実装

### 🔄 変更

#### **カテゴリー拡張**
- 8カテゴリー → 16カテゴリー
- アイコン追加（視認性向上）

#### **ポート変更**
- バックエンド: 8000 → 8001（HSTS対策）

---

## Version 0.1.0 (2025-11-29)

### 初期リリース
- プロジェクト構造作成
- Django バックエンドセットアップ
- Next.js フロントエンドセットアップ
- 基本認証機能
- ギャラリーページ
- Docker 構成

---

**最終更新**: 2025-11-30
**次期バージョン予定**: 0.3.0

